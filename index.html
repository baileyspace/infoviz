<!DOCTYPE html>	
<head>
<meta charset="utf-8">
<title>Anne and Bailey Information Visualization Final Project</title>	
<meta name="description" content="A review of informal survey data on the use of technology and public radio.">	
<link rel="stylesheet" href="css/style.css">	
<script src="js/libs/modernizr-2.5.3.min.js"></script>
<script src="js/libs/jquery-1.7.1.min.js" type="text/javascript" charset="utf-8"></script>
<script src="js/libs/raphael-min.js" type="text/javascript" charset="utf-8"></script>
<script src="js/libs/g.raphael-min.js" type="text/javascript" charset="utf-8"></script>
<script src="js/libs/g.bar-min.js" type="text/javascript" charset="utf-8"></script>

<script>	
 	window.onload= function () {
	// Data
	var podcast=[2,6,8,8,9,6,2,2,0,3];
	var smartphone=[0,4,2,4,6,2,1,0,0,1];
	var streaming=[0,5,13,11,8,3,3,1,0,1];
	var radio=[0,7,10,12,9,12,5,3,4,11];
	// Labels
	var axisx=["21-23","24-26","27-29","30-32","33-35","36-38","39-41","42-45","46-48","49 and older"];
	// create canvas
	var r = Raphael("listen_habits");
	// text styling	
	var txtattr={font:"1em Arial", fill:"#888", "font-weight": "bold", "color": "#363942", "fill": "#363942"};
	// functions for hover
	fin = function () {
        this.flag = r.popup(this.bar.x, this.bar.y, this.bar.value || "0").insertBefore(this);
    };
    fout = function () {
        this.flag.animate({opacity: 0}, 300, function () {this.remove();});
	};
	
	// Podcast Chart
	$('a#podcastChart').click(function(){ 
		// Barchart values are x, y, width, height
		if ($('#listen_habits > svg').children().length > 0) {
			$('#listen_habits > svg').empty();
			var chart1=r.barchart(10,30, 500, 350, [podcast]).attr({"fill":"#363942", "opacity": 0});
			var chart1animate=chart1.animate({opacity: 1}, 1500 ).hover(fin,fout);
		}
		else {
			chart1;
			chart1animate;
		} 
	});
	
	// Smartphone Chart
	$('a#smartphoneChart').click(function(){ 
		if ($('#listen_habits > svg').children().length > 0) {
			$('#listen_habits > svg').empty();
			var chart2=r.barchart(10,30, 500,350, [smartphone]).attr({"fill":"#363942", "opacity": 0});
			var chart2animate= chart2.animate({opacity: 1}, 1500 ).hover(fin,fout);
		}
		else {
			chart2;
			chart2animate;
		}
	});
	
	// Streaming Chart
	$('a#streamingChart').click(function(){ 
		if ($('#listen_habits > svg').children().length > 0) {
			$('#listen_habits > svg').empty();
			chart3= r.barchart(10,30, 500,350, [streaming]).attr({"fill":"#363942", "opacity": 0});
			chart3animate= chart3.animate({opacity: 1}, 1500 ).hover(fin,fout); 
		}
		else {
			chart3;
			chart3animate;
		}
	});
	
	// Radio Chart
	$('a#radioChart').click(function(){ 
		if ($('#listen_habits > svg').children().length > 0) {
			$('#listen_habits > svg').empty();
			chart4=r.barchart(10,30, 500,350, [radio]).attr({"fill":"#363942", "opacity": 0});
			chart4animate= chart4.animate({opacity: 1}, 1500 ).hover(fin,fout);
		}
		else {
			chart4;
			chart4animate; 
		}
	});
	
	// All chart - which doesn't currently make a lot of sense	
	$('a#all').click(function(){ 
		if ($('#listen_habits > svg').children().length > 0) {
			$('#listen_habits > svg').empty();
			r.barchart(10,30, 500, 350, [podcast]).attr({"fill":"#363942", "opacity": .6});
			r.barchart(10,30, 500,350, [radio]).attr({"fill":"#FF8357", "opacity": .6});
			r.barchart(10,30, 500,350, [streaming]).attr({"fill":"#D8CAA8", "opacity": .6});
			r.barchart(10,30, 500,350, [smartphone]).attr({"fill":"#F5E9AE", "opacity": .6});
		}
		else {
			r.barchart(10,30, 500,350, [podcast]).attr({"fill":"#363942", "opacity": .6});
			r.barchart(10,30, 500,350, [radio]).attr({"fill":"#FF8357", "opacity": .6});
			r.barchart(10,30, 500,350, [streaming]).attr({"fill":"#D8CAA8", "opacity": .6});
			r.barchart(10,30, 500,350, [smartphone]).attr({"fill":"#F5E9AE", "opacity": .6});
		}
	});
	// My feeble attempts at labeling the axis
	// axis=r.g.axis(40,230,300,0,400,10,2);
	// axis.text.attr(txtattr);			
};		
</script>
	
</head>
<body>
<!-- Div for the charts. This has to stay empty to work with the javascript -->
<div id="listen_habits">
	
</div>
<div id="selection">
	<ul>
		<li><a id="podcastChart" href="#">Podcast</a></li>
		<li><a id ="smartphoneChart" href="#">Smartphone</a></li>
		<li><a id="streamingChart" href="#">Streaming</a></li>
		<li><a id="radioChart" href="#">Terrestrial Radio</a></li>
		<li><a id="all" href="#">All</a></li>
	</ul>
</div>
</body>
</html>